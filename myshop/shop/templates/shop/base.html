{% load i18n %}
{% load static %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>{% block title %}Mosaic.it{% endblock %}</title>
        <link href="{% static "css/base.css" %}" rel="stylesheet">
    </head>
    <body>
        <div id="header">
            <a href="/" class="logo">Mosaic.it</a>
        </div>
        {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                    <li class="{{ message.tags }}">{{ message|safe }}<a href="#" class="close">x</a></li>
                {% endfor %}
            </ul>
        {% endif %}
        <div id="subheader">
            <div class="cart">
                {% with total_items=cart|length %}
                    {% if total_items > 0 %}
                    {% trans "Your cart" %}: 
                        <a href="{% url "cart:cart_detail" %}">
                            {% blocktrans with total=cart.get_total_price count items=total_items %}
                                {{ items }} item, ${{ total }}
                                {% plural %}
                                {{ items }} items, ${{ total }}
                            {% endblocktrans %}
                        </a>
                    {% elif not order %}
                        {% trans "Your cart is empty." %}
                    {% endif %}
                {% endwith %}
            </div>
        </div>
        <div id="content">
            {% block content %}{% endblock %}
        </div>
        {% if messages %}
        <script>
            document.addEventListener('DOMContentLoaded', (event) => {
                document.querySelectorAll('ul.messages a.close').forEach(
                    el => el.addEventListener('click', () => el.parentElement.parentElement.removeChild(el.parentElement))
                );
            })
        </script>
        {% endif %}
    </body>
</html>